<nav class="navbar navbar-expand-lg navbar-light bg-light bg-gradient fixed-top py-0">
  <div class="container">

    <% if user_signed_in? %>
      <% if current_user.role == "labor" %>
        <a class="navbar-brand fw-bold" href="/labors/dashboard"><i class="fas fa-broom ms-1"></i>JOBFINDERHUB</a>
      <% elsif current_user.role == "user" %>
        <a class="navbar-brand fw-bold" href="/clients/dashboard"><i class="fas fa-broom ms-1"></i>JOBFINDERHUB</a>
      <% end %>
    <% else %>
      <a class="navbar-brand fw-bold" href="/"><i class="fas fa-broom ms-1"></i>JOBFINDERHUB</a>
    <% end %>


    <button class="navbar-toggler" type="button" data-mdb-toggle="collapse" data-mdb-target="#navbarButtonsExample" aria-controls="navbarButtonsExample" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fas fa-bars"></i></button>

    <div class="collapse navbar-collapse" id="navbarButtonsExample">
      <ul class="navbar-nav">
        <li class="nav-item"><%= link_to "Contact", contact_path, class: "nav-link" %></li>
      </ul>
      <% if user_signed_in? && current_user.role == "user" %>
        <ul class="navbar-nav ms-auto me-3 my-0">
          <li class="nav-item"><%= link_to "Create Work", new_job_path, class: "nav-link" %></li>
          <li class="nav-item"><%= link_to "Find Labor", labors_path, class: "nav-link" %></li>
          <li class="nav-item"><%= link_to "Map", client_map_path, class: "nav-link" %></li>
          <li class="nav-item"><%= link_to "Admin Assist", issues_path, class: "nav-link" %></li>
        </ul>
        <ul class="navbar-nav ms-auto me-3 my-0">
          <li class="my-auto">
            <div class="dropdown">
              <a class="dropdown-toggle hidden-arrow nav-link d-sm-flex align-items-sm-center" type="button" id="dropdownMenuicon" data-mdb-toggle="dropdown" aria-expanded="false" data-dropdown-align="left">
                <% if current_user.avatar.attached? %>
                  <%= image_tag current_user.avatar, height: 35, width: 35, class: "rounded-circle border border-3" %>
                <% else %>
                  <%= image_tag "", height: 33, width: 33, class: "gambar rounded-circle" %>
                <% end %>
                <span class="d-flex flex-column">
                  <h6 class="ms-1 my-0 fw-bold" style="font-size: 13px"><%= current_user.name %></h6>
                  <h6 class="ms-1 my-0" style="font-size: 10px"><%= current_user.email %></h6>
                </span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuicon">
                <li>
                  <%= link_to edit_user_registration_path(current_user.name), class: "dropdown-item" do %>
                    <i class="fas fa-user-alt pe-2"></i>Edit Profile
                  <% end %>
                </li>
                <li>
                  <%= link_to profile_path(current_user), class: 'dropdown-item' do %>
                    <i class="fas fa-user-circle pe-2"></i>Profile
                  <% end %>
                </li>
                <li>
                  <%= button_to destroy_user_session_path, method: :delete, class: "dropdown-item" do %>
                    <i class="fas fa-sign-out-alt"></i> Logout
                  <% end %>
                </li>
              </ul>
            </div>
          </li>
        </ul>

      <% elsif user_signed_in? && current_user.role == "labor" %>
        <ul class="navbar-nav ms-auto me-3 my-0">
          <li class="my-auto">
            <div class="dropdown">
              <a class="dropdown-toggle hidden-arrow nav-link d-sm-flex align-items-sm-center" type="button" id="dropdownMenuicon" data-mdb-toggle="dropdown" aria-expanded="false" data-dropdown-align="left">
                <% if current_user.avatar.attached? %>
                  <%= image_tag current_user.avatar, height: 35, width: 35, class: "rounded-circle border border-3" %>
                <% else %>
                  <%= image_tag "", height: 33, width: 33, class: "gambar rounded-circle" %>
                <% end %>
                <span class="d-flex flex-column">
                  <h6 class="ms-1 my-0 fw-bold" style="font-size: 13px"><%= current_user.name %></h6>
                  <h6 class="ms-1 my-0" style="font-size: 10px"><%= current_user.email %></h6>
                </span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuicon">
                <li>
                  <%= link_to edit_user_registration_path(current_user.name), class: "dropdown-item" do %>
                    <i class="fas fa-user-alt pe-2"></i>Edit Profile
                  <% end %>
                </li>
                <li>
                  <%= link_to profile_path(current_user), class: 'dropdown-item' do %>
                    <i class="fas fa-user-circle pe-2"></i>Profile
                  <% end %>
                </li>
                <li>
                  <%= button_to destroy_user_session_path, method: :delete, class: "dropdown-item" do %>
                    <i class="fas fa-sign-out-alt"></i> Logout
                  <% end %>
                </li>
              </ul>
            </div>
          </li>
        </ul>

      <% else %>
        <ul class="navbar-nav ms-auto me-3 gap-1">
          <li class="nav-item"><%= link_to "Log In", user_session_path, class: "btn btn-outline-link btn-rounded btn-sm", id: "btn-login" %></li>
          <li class="nav-item"><%= link_to "Sign up", new_user_registration_path, class: "btn btn-outline-success btn-rounded btn-sm" %></li>
        </ul>
      <% end %>
    </div>
  </div>
</nav>
